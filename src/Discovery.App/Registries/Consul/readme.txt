use the consul registry (IServiceRegistry) by using the consul nuget
https://cecilphillip.com/using-consul-for-service-discovery-with-asp-net-core/

consulClient.Agent.ServiceRegister(registration).Wait();